---
import Layout from '~/layouts/PageLayout.astro';
import Features5 from '~/components/widgets/Features.astro';
import type { ContentEntryMap } from "astro:content";
import { getListPage } from "~/utils/lib/contentParser.astro";
import { supportedLang } from "~/utils/lib/languageParser";

export function getStaticPaths() {
  const paths = supportedLang.map((lang) => ({
    params: { lang: lang || undefined },
  }));
  return paths;
}

const { lang } = Astro.params;

const data = await getListPage("evaluations", lang as keyof ContentEntryMap);
if (!data || data.length === 0 || !data[0].data) {
  throw new Error("Evaluations content not found for language: " + lang);
}

const { metadata, features } = data[0].data;
---
<Layout metadata={metadata}>
  <Features5 {...features} />
</Layout>
